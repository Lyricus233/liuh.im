---
import octicons from "@primer/octicons";

const ClockIcon = octicons["clock"].toSVG({
  width: 16,
  height: 16,
  "aria-label": "Clock",
});
---

<a
  data-time-badge
  class="inline-flex items-center gap-1 no-underline hover:underline"
  href="https://time.is/UTC+8"
  target="_blank"
>
  <span class="inline-flex items-center" set:html={ClockIcon} />
  <span data-time-text> (UTC+8) </span>
</a>

<script>
  const badge = document.querySelector("[data-time-badge]");
  if (badge) {
    const textEle = badge.querySelector("[data-time-text]");
    function updateTime() {
      const now = new Date();
      const utcMs = now.getTime() + now.getTimezoneOffset() * 60 * 1000;
      const tzDate = new Date(utcMs + 8 * 60 * 60 * 1000);
      const h = String(tzDate.getHours()).padStart(2, "0");
      const m = String(tzDate.getMinutes()).padStart(2, "0");
      if (textEle) {
        textEle.textContent = `${h}:${m} (UTC+8)`;
      }
    }
    updateTime();
    setInterval(updateTime, 1000);
  }
</script>
